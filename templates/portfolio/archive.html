{% extends 'base.html' %}

{% block title %}사진태그 | 순천만정원{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-6 py-16">
    <h1 class="text-3xl font-light mb-4">Archive</h1>
    <p class="text-sm text-gray-500 mb-8">태그별 기록을 확인할 수 있습니다.</p>

    <div class="flex flex-wrap gap-2 mb-4">
        <a href="{% url 'portfolio:archive' %}" class="px-3 py-1 text-xs border rounded-full {% if not active_initial %}bg-gray-900 text-white border-gray-900{% else %}border-gray-200 text-gray-600{% endif %}">전체</a>
        {% for initial in tag_initials %}
            <a href="{% url 'portfolio:archive' %}?initial={{ initial }}" class="px-3 py-1 text-xs border rounded-full {% if active_initial == initial %}bg-gray-900 text-white border-gray-900{% else %}border-gray-200 text-gray-600{% endif %}">{{ initial }}</a>
        {% endfor %}
    </div>
    <div class="flex flex-wrap gap-2 mb-10">
        <a href="{% url 'portfolio:archive' %}{% if active_initial %}?initial={{ active_initial }}{% endif %}" class="px-3 py-1 text-xs border rounded-full {% if not active_tag %}bg-gray-900 text-white border-gray-900{% else %}border-gray-200 text-gray-600{% endif %}">전체</a>
        {% for tag in tags %}
            <a href="{% url 'portfolio:archive' %}?tag={{ tag.slug }}{% if active_initial %}&initial={{ active_initial }}{% endif %}" class="px-3 py-1 text-xs border rounded-full {% if active_tag == tag.slug %}bg-gray-900 text-white border-gray-900{% else %}border-gray-200 text-gray-600{% endif %}">{{ tag.name }}</a>
        {% endfor %}
    </div>

    {% if photos %}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
            {% for photo in photos %}
                <article class="relative group">
                    <img src="{{ photo.image.url }}" alt="{{ photo.title }}" class="w-full h-48 sm:h-56 md:h-64 object-cover rounded-sm" />
                    <div class="mt-3">
                        <h3 class="text-sm font-medium">{{ photo.title }}</h3>
                        <p class="text-xs text-gray-500 mt-1">
                            {% if photo.season %}{{ photo.season.name }}{% endif %}
                            {% if photo.zone %} · {{ photo.zone.name }}{% endif %}
                        </p>
                        <div class="flex flex-wrap gap-1 mt-2">
                            {% for tag in photo.tags.all %}
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">#{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-sm text-gray-500">아직 업로드된 사진이 없습니다.</div>
    {% endif %}
</section>
{% endblock %}
