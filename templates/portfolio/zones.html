{% extends 'base.html' %}

{% block title %}나라별정원 | 순천만정원{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-6 py-16">
    <h1 class="text-3xl font-light mb-4">나라별 정원</h1>
    <p class="text-sm text-gray-500 mb-10">국가별 정원과 대표 장소를 따라 걷습니다.</p>

    <!-- Zone 버튼 네비게이션 -->
    <div class="flex flex-wrap gap-2 mb-10 pb-6 border-b border-gray-200">
        <!-- 미등록 버튼 -->
        <a href="{% url 'portfolio:zones' %}?zone=unregistered" 
           class="px-4 py-2 rounded-full text-xs font-medium transition {% if selected_zone_id == 'unregistered' %}bg-gray-900 text-white border border-gray-900{% else %}border border-gray-300 text-gray-600 hover:border-gray-900{% endif %}">
            미등록 <span class="ml-1 text-[10px]">({{ unregistered_count }})</span>
        </a>
        
        <!-- Zone 버튼들 -->
        {% for zone in zones_data %}
            <a href="{% url 'portfolio:zones' %}?zone={{ zone.id }}" 
               class="px-4 py-2 rounded-full text-xs font-medium transition {% if selected_zone_id|stringformat:'s' == zone.id|stringformat:'s' %}bg-gray-900 text-white border border-gray-900{% else %}border border-gray-300 text-gray-600 hover:border-gray-900{% endif %}">
                {{ zone.name }}
            </a>
        {% endfor %}
    </div>

    <!-- 현재 선택된 zone의 사진들 -->
    {% if current_photos %}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for photo in current_photos %}
                <article>
                    <div class="bg-gray-100 rounded-sm overflow-hidden">
                        <img src="{{ photo.image.url }}" alt="{{ photo.title }}" class="w-full h-56 object-cover" />
                    </div>
                    <div class="mt-3">
                        <h3 class="text-sm font-medium">{{ photo.title }}</h3>
                        {% if photo.season or photo.zone %}
                            <p class="text-xs text-gray-500 mt-1">
                                {% if photo.season %}{{ photo.season.name }}{% endif %}
                                {% if photo.zone and photo.season %}·{% endif %}
                                {% if photo.zone %}{{ photo.zone.name }}{% endif %}
                            </p>
                        {% endif %}
                        {% if photo.taken_at %}
                            <p class="text-[10px] text-gray-400 mt-1">
                                {{ photo.taken_at|date:"Y년 m월 d일" }}
                            </p>
                        {% else %}
                            <p class="text-[10px] text-gray-400 mt-1">
                                {{ photo.created_at|date:"Y년 m월 d일" }}
                            </p>
                        {% endif %}
                    </div>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-sm text-gray-400 text-center py-12">
            {% if selected_zone_id == 'unregistered' %}
                등록되지 않은 사진이 없습니다.
            {% else %}
                이 나라의 사진이 없습니다.
            {% endif %}
        </div>
    {% endif %}
</section>
{% endblock %}
